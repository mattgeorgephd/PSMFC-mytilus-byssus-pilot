"0",""
"0","require(stats)"
"0",""
"0","# Loop through the list object ""nested_list"""
"0","# extract the ""time"" and ""force"" column"
"0","# remove rows that contain zeros before first non-zero row. Apply to time column as well."
"0","# remove rows that contain zeros after last non-zero row. Apply to time column as well."
"0","# fit loess function to ""time"" and ""force"" after trimmed. Time is x, force is y."
"0","# calculate area under the curve and save in dataframe, along with the first values in the ""mussel"" column and ""thread"" column from ""nested_list"""
"0","# use a for loop to iterate through the nested list object ""nested_list"""
"0",""
"0","# Set the working directory to the folder containing the txt files"
"0","setwd(""thread_strength/QC_plots/control/"")"
"2","Warning: The working directory was changed to C:/Users/mattg/Dropbox/UW/Postdoc/2021_PSMFC_mytilus_byssus_pilot/PSMFC-mytilus-byssus-pilot/thread_strength/QC_plots/control inside a notebook chunk. The working directory will be reset when the chunk is finished running. Use the knitr root.dir option in the setup chunk to change the working directory for notebook chunks."
"0","integral <- data.frame(mussel = numeric(),"
"0","                        thread = numeric(),"
"0","                        auc = numeric())"
"0",""
"0","for(i in seq_along(nested_list)){"
"0","  # extract time and force column from the current nested list element using $ notation"
"0","  "
"0","  # fit loess function to ""time"" and ""force"" using loess() and save as an object"
"0","  current_loess <- loess(force ~ time, data = current_df)"
"0","  jpeg(paste(nested_list[[i]]$mussel[1],""_"",nested_list[[i]]$thread[1],"".jpg"",sep=""""))"
"0","  lines(current_loess, col = ""red"") # add the loess function to the plot in red"
"0","  dev.off()"
"0","  "
"0","  # calculate area under the curve using approx() to approximate the integral and save to a variable"
"0","  auc <- sum(diff(current_loess$x) * (approx(current_loess$x, current_loess$y, n = length(current_loess$x)))$y[-1])"
"0","  "
"0","  mussel_first_val <- nested_list[[i]]$mussel[1]"
"0","  thread_first_val <- nested_list[[i]]$thread[1]"
"0","  integral_control <- rbind(integral, data.frame(mussel = nested_list[[i]]$mussel[1],"
"0","}"
"0",""
"0",""
